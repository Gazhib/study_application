services:
  postgres:
  image: postgres:16
  environment:
    POSTGRES_PASSWORD: postgres
    POSTGRES_DB: study
  ports: ["5432:5432"]
  volumes: ["pgdata:/var/lib/postgresql/data"]
  backend:
    build: ../backend
    environment:
      DB_URL: postgresql+psycopg://postgres:postgres@postgres:5432/study
      JWT_SECRET: change-me
    depends_on: [postgres]
    ports: ["8000:8000"]
frontend:
  build: ../frontend
  environment:
    - VITE_API_URL=http://localhost:8000
  depends_on: [backend]
  ports: ["5173:80"]
volumes:
  pgdata: {}
